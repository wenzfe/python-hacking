from io import BufferedReader
from os.path import basename
from typing import TypedDict
from queue import Queue

from .hash import hash

class File(TypedDict):
    filename: str
    data: BufferedReader

def extract_file(queue: Queue, filename: str) -> File:
    """
    The Queue to send the file to for extraction.
    """
    file = File(filename=f"{basename(filename)} {hash(filename)}", data=open(filename, 'rb'))
    queue.put(file)

def extract_string(queue: Queue, string: str):
    """
    The Queue to send the string to for extraction.
    """
    queue.put(string)
