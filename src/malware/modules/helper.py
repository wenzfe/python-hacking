from queue import Queue
from typing import TypedDict
from io import BufferedReader
from .hash import hash
from os.path import basename


class File(TypedDict):
    filename: str
    data: BufferedReader

def extract_file(queue: Queue, filename: str) -> File:
    """
    The Queue to send the file to for extraction.
    """
    file = File(filename=f"file {basename(filename)} {hash(filename)}", data=open(filename, 'rb'))
    queue.put(file)

def extract_string(queue: Queue, string: str):
    """
    The Queue to send the string to for extraction.
    """
    queue.put(string)
