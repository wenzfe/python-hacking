from client import Client
from threading import Thread
from time import sleep

def cmd_input(client):
    cmd = ''
    while cmd != 'exit':
        sleep(3)
        cmd = input('$ ')
        client.stdin.put(cmd)
    print("Exit ...")

def read(malware):
    while True:
        if malware.get_stdout_queue().qsize():
            print(malware.get_stout_queue().get())


def shell_main(clients, client_list_lock):
    print("Use: "+str(clients))
    try:
        for name,client in clients.items():
            print("Targetname: "+name)
            t = Thread(target=cmd_input, args=(client,))
            t.start()
            # while not client.get_stdin_queue().qsize():
            #     sleep(2)
            #     print("Get Queue Item: "+client.get_stdin_queue().get())
    except KeyboardInterrupt:
        exit(-1)

