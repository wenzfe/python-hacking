from time import sleep
import logging
import sys

from modules.malware.check_process import get_pids

if __name__ == '__main__':
    FORMAT = '[%(asctime)s] [%(levelname)-8s] [%(message)s]'
    # filename='/tmp/cc.log'
    logging.basicConfig(stream=sys.stdout, format=FORMAT, level=logging.INFO)
    while True:
        logging.info('üëÆ watching ')
        sleep(10)
        malware_pids = get_pids("mclient")
        if malware_pids != []:
            for t in range(0,12, -1):
                logging.info(f'üïµÔ∏è found potential threat! ‚è∞ evaluating (remaining{t*10}s): [{malware_pids}]')
            #sys.stdout.write(f'\r\t - Time')
                sys.stdout.flush()
                sleep(10)
            